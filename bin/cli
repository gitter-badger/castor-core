#!/usr/bin/env node
/* vim: set ft=javascript: */
"use strict";

var path = require('path')
  , optimist = require('optimist')
  , pck = require('../package.json')
;

var argv = optimist.usage(
  [
    'USAGE: $0 [<options>] [<directory>]',
  ].join('\n\n')
)
.option('version', {
    alias: 'v',
    description: 'Show the current version'
  }
)
.option('help', {
    alias: 'h',
    description: 'Display this help message'
  }
)
.boolean(['help', 'version'])
.argv;


if (argv.help) {
  require('optimist').showHelp(console.log);
  process.exit(0);
}

if (argv.version) {
  console.log('version', pck.version);
  process.exit(0);
}

require('../config.js').set('dataPath', path.normalize(path.resolve(process.cwd(), path.normalize(argv._[0] || '.'))));

require('../index.js');


